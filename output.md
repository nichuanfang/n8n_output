从逻辑和语法角度看，你提供的SQL整体是合理的，能实现“先从运行时表取变量值，若无则从历史表取变量值”的需求。特别是用DISTINCT ON和WHERE NOT EXISTS结合，符合PostgreSQL的用法。

不过，以下几点建议你确认和注意：

1. **参数传入**  
   - `:processInstanceIds` 应该是数组类型，确保调用时传入格式正确。  
   - `:variableName` 是字符串。

2. **运行时表无排序列**  
   - 运行时表用DISTINCT ON但无ORDER BY，PostgreSQL会随机取每组第一条，是否满足业务需求？如果需要特定规则，可能需要加排序列。

3. **性能**  
   - 如果`processInstanceIds`很多，ANY操作可能影响性能，考虑索引或临时表。

4. **字段类型和NULL**  
   - 你过滤了`text_ IS NOT NULL`，确保业务上变量值确实存储在text_字段。

5. **测试验证**  
   - 建议在测试环境执行，确认结果符合预期。

总结：  
你的SQL写法在PostgreSQL中是正确的，逻辑清晰，符合需求。只要参数传递正确，表结构字段符合预期，应该没问题。

如果你需要，我可以帮你写一个测试样例或者帮你做进一步优化。需要吗？